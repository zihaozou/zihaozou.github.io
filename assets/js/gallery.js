var gallery=document.querySelector("#gallery"),getVal=function(e,t){return parseInt(window.getComputedStyle(e).getPropertyValue(t))},getHeight=function(e){return e.querySelector(".content").getBoundingClientRect().height},resizeAll=function(){var e=getVal(gallery,"grid-auto-rows"),t=getVal(gallery,"grid-row-gap");gallery.querySelectorAll(".gallery-item").forEach(function(l){l.style.gridRowEnd="span "+Math.ceil((getHeight(l)+t)/(e+t))})};gallery.querySelectorAll("img").forEach(function(e){e.addEventListener("load",async function(){var t=getVal(gallery,"grid-auto-rows"),l=getVal(gallery,"grid-row-gap"),r=e.parentElement.parentElement;r.style.gridRowEnd="span "+Math.ceil((getHeight(r)+l)/(t+l)),await new Promise(e=>setTimeout(e,Math.floor(1500*Math.random()))),e.style.opacity=1})}),window.addEventListener("resize",resizeAll),gallery.querySelectorAll(".gallery-item").forEach(function(e){e.addEventListener("click",function(){e.classList.toggle("full")})});